/***********************************

// @ScriptName        酷我音乐[ VIP+净化 ]
// @Author            @ddgksf2013
// @UpdateTime        2025-04-25
// @Attention         如需引用请注明出处，谢谢合作！
// @Version           V2.0.46
// @ScriptURL         https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
1、本重写仅限本人使用，严禁传播或售卖
2、解锁VIP歌曲，VIP听书，VIP装扮
3、全面净化去除酷我音乐广告
4、脚本工作原理为音源替换而非破解
5、若需要更高音质请付费支持歌手
6、若酷我播放发热，请关闭广告终结者Anti分流

***********************************

[rewrite_local]
# > 通用广告请求@ddgksf2013
https?:\/\/vip1\.kuwo\.cn\/vip\/activity\/kwMemberDay url reject-200
# > 屏蔽热词@ddgksf2013
https?:\/\/hotword\.kuwo\.cn\/hotword\.s url reject-200
# > 通用广告请求@ddgksf2013
https?:\/\/vip1\.kuwo\.cn\/vip_adv\/ url reject-200
# > 通用广告请求@ddgksf2013
https?:\/\/wapi\.kuwo\.cn\/openapi\/v1\/app\/pasterAdvert url reject-200
# > 应用内弹窗及右下角@ddgksf2013
^https?:\/\/mobilead\.kuwo\.cn\/ url reject-200
# > 搜索框处理@ddgksf2013
https?:\/\/searchrecterm\.kuwo\.cn\/recterm\.s url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 会员页广告@ddgksf2013
https?:\/\/appi\.kuwo\.cn\/kuwopay\/vip-tab\/page\/cells url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 会员页顶部广告tab@ddgksf2013
https?:\/\/appi\.kuwo\.cn\/kuwopay\/vip-tab\/setting url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 开屏广告@ddgksf2013
https?:\/\/rich\.kuwo\.cn\/AdService url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 数字专辑@ddgksf2013
^https?:\/\/musicpay\.kuwo\.cn\/music\.pay\?newver url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 听书权限接口1@ddgksf2013
^https?:\/\/[a-z0-9A-Z]+\.(kuwo|lrts)\.(cn|me)\/a\.p url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 听书权限接口2@ddgksf2013
^https?:\/\/.*\.kuwo\.cn\/v2\/api\/pay\/vip\/extraVipStatus url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 新版vip接口1@ddgksf2013
^https?:\/\/vip1\.kuwo\.cn\/vip\/enc\/user\/vip\?op=ui url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 新版vip接口2@ddgksf2013
^https?:\/\/vip1\.kuwo\.cn\/vip\/v2\/userbase\/vip\?op=get url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 旧版vip接口@ddgksf2013
^https?:\/\/vip1\.kuwo\.cn\/vip\/v2\/user\/vip\?(uid|op=ui) url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 皮肤解锁@ddgksf2013
^https?:\/\/vip1\.kuwo\.cn\/vip\/v2\/theme url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 下载接口@ddgksf2013
^https?:\/\/musicpay\.kuwo\.cn\/music\.pay\?ui url script-request-header https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 我的页面卡片@ddgksf2013
^https?:\/\/appi.kuwo.cn/kuwopay/personal/cells url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js
# > 音乐播放接口@ddgksf2013
^https:\/\/[a-z0-9A-Z]+\.kuwo\.cn\/mobi\.s\?f=kwxs url script-response-body https://gist.githubusercontent.com/ddgksf2013/0f76e952f0c4a2579932f45a209b40c3/raw/mykkmusic.vip.js


[mitm]
hostname = *.kuwo.cn, *.lrts.me

***********************************/


const version = 'V1.0.15';

const $ = new Env("KW");
var _0xodR='jsjiami.com.v7';var _0x380c45=_0x1d5e;function _0x40e2(){var _0x1341d0=(function(){return[_0xodR,'xAHVjLsHAjRFiAGamBi.ecFom.Kv7pJYfTudGPLn==','W7edW4SlWR7dNrhcJmkWt07dLG','W5ddSZiJW4e','W4/dNWtdQ8oXWPWlWRNcUCkLcmocycxcGq3cVCkNbWOwW6/dVSo4WRC','z8oGW5Wr','aCkDFmoUW7zc','W4KFlCokWOy','W5ddKuxdHG','cLtdPLfC','rtSlvq','rmoRW44nW6X3C8koWOhdQLXq','W4eQFSkB','WPy0WObsWPhcJtWZWQNcNZtcNq','W6iGgmkdruPGW5qoybldNq','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','W5j3W5q','W7NcVSofkt/cGMa','WOBdKfNdHuKKlxJdJwCcBCkU','W6jBsG','W6RcNCkEC8oHfr8','EmkYWOLl','WRyNWQldOG','WODqmCkAW4hcJG','W5ZdV8oOCSk9','bSk7WRPdpmk2WQy','uCksWPX3W7qzzKNcHcaQW61S','WPdcItm9W7dcP8o/W4i','tSorga','W47dSCo+Ea','sCk7WRX+W4y','W7fPs8oahri0W4uayrRdLCoM','pmkhoCkifG','WRi1dCkDtuzH','CSk9rmktW4FdVSo6','W6ZdOmkdoG','AaX6W7HQWQTf','tdaNmfikzq','W4xdNaSS','C8oMW4HBW5T7qCkgWP3dOq','W4SJW4ldM8oUvhzXW4NdT2SZWONcQ8o2W5eYig07fSo4pW','yCoUW4Wj','WOK1WO7dM8kVjwFdIGiEW4y','pmo0W5/cMd8','W6TqWQa','wmkMWO1YivKNWQhdQa','bmoonrVdHmkQFdvbW67cMq','W7JdSmkeb8o+WQy','WQhdR8kCW4m','lcldQ8oT','WQSXWOJdS8k7jfVdMIWj','gSoHWO7cJmkwBSkgW5a3','W6ZcI8kBDG','WQKBWQFcI8kA','W44Dbmo2WRzCW6K','j8k3WQzXjmk0WQBcNW','W4RdMbC','W5XVWO7cIq','W4bjgfK','W4BcHSkFWQCGWOa','emoqW4a','tsO3jrbQlmkeWOpdKmkgBmoCWOBdVXXHW6WSq3GxcvZdMmodqLhdK1fattJdPCk0WRq4W5uYuSktWQldM2y7WOhcUSk9WRNdNx5MWRCLomopW5/dQCocW53cLbT8sX0+zHpdHZ1qWQ/dNSoIFJBdMtHHFrCFW7CFkSorhL7dGSkItSohwmkfWO/cQmk7W6z7jmkRhSoMW5W8g2JdG2NdLG/dS2ZcHSkbWQZcQZZcHcvCW4GSnKqpmW','WO1UW5y6WOPDWOtcVCkY','WQTsWO5o','6iw/5P6o5yEH6lw+5l6755sb772A5Pwp6lAn6k+N5lIK5OM4772D','wq/cLa','d2ZdH2i','lSoBz8ojW7zOwCoRoeFdS1/dPCk0C8oQttxcP8kiW5mxWRv5WRVdPMq','AqX+W7bQWRXb','WQGrWQ7dHCo3FSowwgdcIvFcMmkmW7SNW7nWW7JcJMKGW73cOCok','dmomW4GIWRXMma','hN/dNW'].concat((function(){return['W5hcPrbQ','W5y3DG','n8k8zSk9W6NdTG','Cmo5W7aUW6q','W7mlW40kWRFdNwtdLSo4bsVcImoG','W5u+W4BdNSo0','ocldRCo/pa','W7hdUu4xWR0OhSoCuenob8kTlh1VW78','wd7cGdiskmodW7hdKanfra','WOWODCkaWOpcMtK','WQi/gCki','WR0uWPhcRsBdJ8k9Bq','W5eYW4BdH8o8dtW','CSkypq','W57cSrnKB8kuBCoqvaZdGs/cVMeHW5hdKSoWW5NcTMeVdq','uCoreCkTzq','imkOWOpdUmk2WQKNWPKklmk1WQW','x8kkC1JcGSoDmKjcW5pcMCkcWQBdGmkWgmo4qCkhqCo4WO3dVmosWPfnvSklBeLnmSozWOv0WP/cOw7dGSoZc8kkmwZcVmojWRzIdrDXWR3dQmoNvCoSW70iWRysWRqRW7e/nbO','WPbKW6G6','W5lcImkxWQS','WRhdUCkcW4m','W5u+W4BdHSoyfIK3W4/cVa','W5m+W5i','W5ddNuldNKi','hSkXF8o+W6i','uSoFdCk5CW','wbZcMG','sdK7pv4VlCkbWPVdImklk8krWOm','qt83na','W7XnWQJdMa','FmkRWOxcMIzxyqaL','dx/dLMy','W7zYW6hcPSoQzJ7cMxLlWO8uW5u','WPtcNKFcR8kYWPCtW7VcHCoyamozyW','WPeUWQnT','W6hdUviSWQ4/','W7pdPmkKW74Cnr8','WQ43W6aIySoUiCkxfq','W753bwWl','AJFdPSo8pmkzWO7cOq','W43dOmkgc3y','W7ZdHgldT2W','WRq1dSkf','W7FdUmkyfG','e8opoq','C8kZWOLxW5ldKmoP','W4JdV8oUya','WQJdPCkgW448nq','kmkOWOtdRq','jmkuiq','W5SQWRT8WQbRW6RdQHhdHmo8WPLh','WOxcJee','W6HbWQNcVa','W5CSD8kh','bsqdtvldPINdTCkKnGNcUq','WPdcHaBcGHDMDc/cLsmqz8kV','WPjqnCkaW4hcGv4','W5n2W40l','WRjiWPHi','WRFdPCkcW4OYmH4','W4zmWRNcJGS','b8kppCkOh8kPkq','W6DgsLRcT2C','jSk2DSkY','wCkSWO40DIWdWPRdR8kFW5VcJa','lCo0W5xcHG','ucWV','W7qoW4OoWRFdNgpcI8kzzNJdLSkK','WOXunSkyW7dcJuSYWOGYW5KrWR/dQW','FSkliSkjf8o1pG','W6voWR7cSqVdOmk2BW','qmorg8kZ'].concat((function(){return['W63cTmohad/cGM0','W43dLaW5','BmkQWOddJN0ZoW','WQTAWO5oW5FcGItcK8k4EhtdLSkKW6a','xHtcM8kaWPJdQ0bxySkyB8oyaCkwAfxcU8kSw0yguG','Bqb+W5b+WQDrW5VcLmkVW4jAW63cISkA','hKtdImkFW5JdGxX3sq','Amk4WP1EW4VdVmoQ','WO7dU8o0zCo6W5JcN8krW7nJWQCetmoxACo4','WPFcPGT+EmkDymkGvaZdGsddSde','E3pcRCk/Bmo2W5xdIXBdPZm','W4ddIbSKW4C','j8k8WOFdO8kzWRW3W5Szz8o/WReoxN5BWRNdKSofy8kwsCkEoColWRC','WQaTWRxdRW','WRq3W50kuW','BSkKWP1x','WQeJWQxdTCkY','WQVcRCkeeg/cNtOkd05C','WRddSSkE','W5aXAmklWOtdKcnaW6e','W6NdQSkt','W5mKAmkrWO8','WQpcPmkEc8oKWRChW5lcQJxdQmkBWQ9cWOpcT0q4BCkGlLxdHMe','WOvOW7W2WPi','W6vtWR/cQaFdKSk6Ba','wJZcIZmCkmo9W6ZdGbvuvW','WRaNWQhdUSk7nwS','oSoPW50','W4VdU8oUD8k5WO4','W5hdNa0+W40','W4zXW7eYWPr8WPhcQSkLoCk/E8oc','WOLBiCkjW5JcRv0','WRZcV8ouCdm3EhDkW6Wema','lSkMWPtdTq','WPfVW7q','WP07WQn8','W4hcOrD/','W65bW7hdNSoBWO3dQqClW4f/DSoQ','E8kRWOhdJ3WYoNXJW49ogMW','WPGVWRn0WRy','hmkjz8o0W6nqWRlcNerEn1uYbmk7aSk8eSkgB3hcQW','W4jrkSkBW47cG1KRWP1DWOXo','m8kjkCks','WQO2WQxdPSoGEshdNYalWO4kWO56j3JcVv0QWPrxeM54qSotnmo8WPTbWRBcLcz6aSkHnmkxW6XyW6HNhCoKWReNW6xdPuz1g8kMrwnvWOJdRmoFW6ZdLIdcOIjvomoXWO3cHehcPmo4WQFdNCkyC8k1W4ldRSoDc8oFtmkdW4XUwINdNqO6rbSO','W7tdPeWXWQuQbCoPta','geJdGmoAWOtcTavrqmoGrSoyyW','W75fWQ3cSr/dP8k2','W6hdSSkpgW','W7XsWRtcVHS','u8kFC0K','W6/dPeOOWRH3q8kGqqXqj8o6ohb6W7ejqqmVW47dUW','W4BcSbzICCksFCkzwW','WRRcMSkbASoNhG7dUCoNwMhcMSofzSoiWOW1umo+WO/dHSoZCCoqfYRdLW','pSkSWOddOmkiWR4R','nCk/WQje','aMpdL2ztu8oi','oCk7WPW','WPbun8kFW4u','r8omdCkLzehdJq','gKxdJSozWO/cShbkDComwCoy','W7BcV8otcsBcRM4','W6nqvLy','WQO2WQxdPSkPBchcHIawW55dWOaHo2ldPffQW5HpvhGYg8kun8kYWP8zW57cKZL4fSkLF8oCWQGcWRG1vSoNWRS1WRRcSvq9h8kNqWuvWP3cVCowWRtcLNhcPg1OvmooWRVcVa','h2JdGhC','FSk8WPLt','W6rmuKxcTxi','W7JdPSkxf3P1wwi','W5FdKvFdGeq+nNRdHMDfjCoYBJpcRSoCmCoxgbe','lCosDmkAW7q','WRrpWO9tW6NcIJ3cGmkX','W4BcOrb9FSkz'];}()));}()));}());_0x40e2=function(){return _0x1341d0;};return _0x40e2();};(function(_0x2e4b46,_0x596316,_0x152616,_0x16060c,_0x14c0eb,_0x5c7549,_0x17f744){return _0x2e4b46=_0x2e4b46>>0x6,_0x5c7549='hs',_0x17f744='hs',function(_0x23b062,_0x89b677,_0x3749d1,_0x30e4f1,_0x584410){var _0x45033f=_0x1d5e;_0x30e4f1='tfi',_0x5c7549=_0x30e4f1+_0x5c7549,_0x584410='up',_0x17f744+=_0x584410,_0x5c7549=_0x3749d1(_0x5c7549),_0x17f744=_0x3749d1(_0x17f744),_0x3749d1=0x0;var _0x39843e=_0x23b062();while(!![]&&--_0x16060c+_0x89b677){try{_0x30e4f1=parseInt(_0x45033f(0x10e,'poPG'))/0x1+-parseInt(_0x45033f(0xb5,'poPG'))/0x2*(-parseInt(_0x45033f(0xd1,'n!Nu'))/0x3)+-parseInt(_0x45033f(0xcb,'d#66'))/0x4*(-parseInt(_0x45033f(0x93,'dhG1'))/0x5)+-parseInt(_0x45033f(0x13c,'vemE'))/0x6*(parseInt(_0x45033f(0x155,'ZOhk'))/0x7)+parseInt(_0x45033f(0x11a,'%QGb'))/0x8+-parseInt(_0x45033f(0xce,'8UJU'))/0x9+parseInt(_0x45033f(0x167,'d0@n'))/0xa*(-parseInt(_0x45033f(0x115,'pyhb'))/0xb);}catch(_0x27f256){_0x30e4f1=_0x3749d1;}finally{_0x584410=_0x39843e[_0x5c7549]();if(_0x2e4b46<=_0x16060c)_0x3749d1?_0x14c0eb?_0x30e4f1=_0x584410:_0x14c0eb=_0x584410:_0x3749d1=_0x584410;else{if(_0x3749d1==_0x14c0eb['replace'](/[GBfKAdTuPHnxJYVLpeRF=]/g,'')){if(_0x30e4f1===_0x89b677){_0x39843e['un'+_0x5c7549](_0x584410);break;}_0x39843e[_0x17f744](_0x584410);}}}}}(_0x152616,_0x596316,function(_0x141097,_0x40b3bd,_0x19b24c,_0x4df6a0,_0x5cb88a,_0x2f6e8b,_0x350605){return _0x40b3bd='\x73\x70\x6c\x69\x74',_0x141097=arguments[0x0],_0x141097=_0x141097[_0x40b3bd](''),_0x19b24c='\x72\x65\x76\x65\x72\x73\x65',_0x141097=_0x141097[_0x19b24c]('\x76'),_0x4df6a0='\x6a\x6f\x69\x6e',(0x1a0ee1,_0x141097[_0x4df6a0](''));});}(0x3300,0x4e907,_0x40e2,0xce),_0x40e2)&&(_0xodR=0x1c4c);let method=$request[_0x380c45(0xdc,'n!Nu')];const tip=_0x380c45(0xa8,'j31p');function _0x1d5e(_0x886cdd,_0x5eaf08){var _0x40e2d9=_0x40e2();return _0x1d5e=function(_0x1d5ea9,_0x5a4bb6){_0x1d5ea9=_0x1d5ea9-0x93;var _0x5f4dae=_0x40e2d9[_0x1d5ea9];if(_0x1d5e['pKFVWL']===undefined){var _0x2f9762=function(_0x3a9410){var _0x562de0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x1d8a29='',_0x1e8ae3='';for(var _0x3a6a03=0x0,_0x2fa915,_0x46692e,_0x219be7=0x0;_0x46692e=_0x3a9410['charAt'](_0x219be7++);~_0x46692e&&(_0x2fa915=_0x3a6a03%0x4?_0x2fa915*0x40+_0x46692e:_0x46692e,_0x3a6a03++%0x4)?_0x1d8a29+=String['fromCharCode'](0xff&_0x2fa915>>(-0x2*_0x3a6a03&0x6)):0x0){_0x46692e=_0x562de0['indexOf'](_0x46692e);}for(var _0x1a81c3=0x0,_0x23e735=_0x1d8a29['length'];_0x1a81c3<_0x23e735;_0x1a81c3++){_0x1e8ae3+='%'+('00'+_0x1d8a29['charCodeAt'](_0x1a81c3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1e8ae3);};var _0x2cdfba=function(_0x36f666,_0x4feee7){var _0xadeaa9=[],_0x529274=0x0,_0x4a569f,_0x4c2a34='';_0x36f666=_0x2f9762(_0x36f666);var _0x41438a;for(_0x41438a=0x0;_0x41438a<0x100;_0x41438a++){_0xadeaa9[_0x41438a]=_0x41438a;}for(_0x41438a=0x0;_0x41438a<0x100;_0x41438a++){_0x529274=(_0x529274+_0xadeaa9[_0x41438a]+_0x4feee7['charCodeAt'](_0x41438a%_0x4feee7['length']))%0x100,_0x4a569f=_0xadeaa9[_0x41438a],_0xadeaa9[_0x41438a]=_0xadeaa9[_0x529274],_0xadeaa9[_0x529274]=_0x4a569f;}_0x41438a=0x0,_0x529274=0x0;for(var _0x520fa3=0x0;_0x520fa3<_0x36f666['length'];_0x520fa3++){_0x41438a=(_0x41438a+0x1)%0x100,_0x529274=(_0x529274+_0xadeaa9[_0x41438a])%0x100,_0x4a569f=_0xadeaa9[_0x41438a],_0xadeaa9[_0x41438a]=_0xadeaa9[_0x529274],_0xadeaa9[_0x529274]=_0x4a569f,_0x4c2a34+=String['fromCharCode'](_0x36f666['charCodeAt'](_0x520fa3)^_0xadeaa9[(_0xadeaa9[_0x41438a]+_0xadeaa9[_0x529274])%0x100]);}return _0x4c2a34;};_0x1d5e['IpAQQB']=_0x2cdfba,_0x886cdd=arguments,_0x1d5e['pKFVWL']=!![];}var _0x37c659=_0x40e2d9[0x0],_0x2489e2=_0x1d5ea9+_0x37c659,_0x50e053=_0x886cdd[_0x2489e2];return!_0x50e053?(_0x1d5e['SmraqU']===undefined&&(_0x1d5e['SmraqU']=!![]),_0x5f4dae=_0x1d5e['IpAQQB'](_0x5f4dae,_0x5a4bb6),_0x886cdd[_0x2489e2]=_0x5f4dae):_0x5f4dae=_0x50e053,_0x5f4dae;},_0x1d5e(_0x886cdd,_0x5eaf08);}function showMonthlyPopup(){var _0x5d2f30=_0x380c45,_0x18dd2c={'liMmI':function(_0x459f2a,_0xe058c0){return _0x459f2a===_0xe058c0;},'XpTEK':function(_0x2b77a8,_0x1dadd7){return _0x2b77a8!=_0x1dadd7;},'CoaHu':function(_0x42118e,_0x27496f){return _0x42118e!==_0x27496f;},'iMoeq':'MHtEj','qNMni':'Cuttlefishの自留地','aYURw':_0x5d2f30(0xa5,'m5MA'),'SfQLl':_0x5d2f30(0x127,'6QSy')};const _0x33dde9=new Date()['getMonth'](),_0x2d8c1e=$[_0x5d2f30(0x111,'sKCi')](_0x5d2f30(0xf1,'oTEO'));if(_0x18dd2c[_0x5d2f30(0x103,'FbHD')](_0x2d8c1e,null)||_0x18dd2c[_0x5d2f30(0xd6,'NCRk')](_0x2d8c1e,_0x33dde9)){if(_0x18dd2c[_0x5d2f30(0xd5,'pyhb')](_0x18dd2c[_0x5d2f30(0xc5,'S*)6')],_0x5d2f30(0xd3,'#Ji2')))return!![];else $[_0x5d2f30(0x9d,'8UJU')](_0x18dd2c[_0x5d2f30(0x13d,'ZOhk')],'',_0x18dd2c[_0x5d2f30(0x143,'poPG')],{'open-url':_0x18dd2c[_0x5d2f30(0x158,'cpXu')]}),$[_0x5d2f30(0xaf,'2hAO')](_0x33dde9['toString'](),_0x5d2f30(0xf8,'vemE'));}}if($request[_0x380c45(0x12d,'aFsb')]['indexOf'](_0x380c45(0xf2,'zz(3'))!==-0x1)(async()=>{var _0x2dfd14=_0x380c45,_0xd4c15={'ugYPQ':_0x2dfd14(0x106,'HdUg'),'hyjnq':function(_0x512853){return _0x512853();},'JldSu':function(_0x9aa93f,_0x447f74){return _0x9aa93f+_0x447f74;},'drOpS':_0x2dfd14(0xa2,']*0C'),'uvHFz':'Kw_MusicKey'},_0x449ecf=_0xd4c15[_0x2dfd14(0x141,'[iOd')]['split']('|'),_0x53d707=0x0;while(!![]){switch(_0x449ecf[_0x53d707++]){case'0':_0xd4c15['hyjnq'](showMonthlyPopup);continue;case'1':await $[_0x2dfd14(0xcf,'$URg')][_0x2dfd14(0x109,'pyhb')]({'url':_0xd4c15[_0x2dfd14(0xe9,'TzcB')](_0xd4c15['drOpS'],_0x283102)})['then'](_0x9711e7=>{var _0x4f7b5f=_0x2dfd14;_0x121742=_0x9711e7[_0x4f7b5f(0x13f,'CURS')];});continue;case'2':$[_0x2dfd14(0x15e,'YNwk')]('',_0x2dfd14(0x164,'HiXX'));continue;case'3':var _0x283102=$[_0x2dfd14(0x151,'oTEO')](_0xd4c15[_0x2dfd14(0xb0,'CURS')]);continue;case'4':var _0x121742=$response['body'];continue;case'5':$['done']({'body':_0x121742});continue;}break;}})()[_0x380c45(0x105,'HiXX')](_0x9f029=>console[_0x380c45(0x156,'Eb^4')](_0x380c45(0x12f,'Eb^4')+_0x9f029));else{if(/a\.p/['test']($request[_0x380c45(0xac,'poPG')])){var body=$response['body'],match=body[_0x380c45(0x15a,'zz(3')](/id":(\d+)/),id=match?match[0x1]:null;id&&$[_0x380c45(0x136,'$*8J')](id,_0x380c45(0x164,'HiXX')),id=$response['body'][_0x380c45(0x9b,'[iOd')](/.*?\"id\":(\d+).*/,'$1'),body=$response[_0x380c45(0x102,'HiXX')][_0x380c45(0xf5,'HdUg')](/"type":\d*/g,_0x380c45(0xd4,'QAV0'))['replace'](/"end":\d*/g,_0x380c45(0xfd,'sKCi'))['replace'](/"period":\d*/g,_0x380c45(0x148,'@&g4'))[_0x380c45(0x12a,'aFsb')](/"bought_vip":\d*/g,_0x380c45(0xfe,'9m]v'))['replace'](/"bought_vip_end":\d*/g,_0x380c45(0x129,'aUbW'))['replace'](/"limitfree":\d*/g,_0x380c45(0x113,'ZzwY'))[_0x380c45(0x123,'TzcB')](/"playable":\d*/g,_0x380c45(0xe3,'Kfsk'))[_0x380c45(0x14e,'aUbW')](/"downable":\d*/g,_0x380c45(0x11e,'oTEO'))[_0x380c45(0xe5,'oTEO')](/"playright":\d*/g,_0x380c45(0xdf,'$URg'))[_0x380c45(0xb9,'QVjb')](/"downright":\d*/g,_0x380c45(0x14c,'NCRk'))['replace'](/"policytype":\d*/g,'\x22policytype\x22:1')['replace'](/"policy":\d*/g,'\x22policy\x22:1');}else{if(/music\.pay/[_0x380c45(0x119,'9m]v')]($request[_0x380c45(0xa1,'m5MA')])){if(method==_0x380c45(0x9e,'TzcB')&&$response['body'][_0x380c45(0xf3,'TzcB')](_0x380c45(0x100,'ZOhk'))){let obj=JSON[_0x380c45(0x12e,'oTEO')]($response[_0x380c45(0xc0,'@L)0')]);obj['songs'][0x0][_0x380c45(0x11c,'$URg')][_0x380c45(0x14b,'HdUg')](_0x10e877=>{_0x10e877['st']=0x0;}),$[_0x380c45(0x13b,'9m]v')](obj[_0x380c45(0x9a,'%QGb')][0x0]['id']['toString'](),_0x380c45(0x164,'HiXX'));let audio=obj[_0x380c45(0xbc,'Eb^4')][0x0][_0x380c45(0x10c,'ZzwY')][0x0];obj[_0x380c45(0xe7,'vemE')][0x0]={'info':obj['songs'][0x0],'id':obj[_0x380c45(0x165,'d#66')][0x0]['id'],'pid':audio[_0x380c45(0xc3,'QVjb')],'price':audio[_0x380c45(0x125,'TzcB')],'type':audio['policy'],'name':audio[_0x380c45(0xeb,'$*8J')]+'_1','categray':audio['policy']+'_1','order':0x1666118f,'final':[],'buy':0x62ca4da9,'begin':0x62ca4da9,'end':0xf92a65a9,'CurEnd':0x0,'playCnt':0x0,'playUpper':0x12c,'downCnt':0x0,'downUpper':0x12c,'playVideoCnt':0x0,'playVideoUpper':0xbb8,'downVideoCnt':0x0,'downVideoUpper':0xbb8,'period':0x3e8,'feetype':0x0},body=JSON['stringify'](obj);}}else{if($request[_0x380c45(0x110,'d#66')][_0x380c45(0xda,'cpXu')](_0x380c45(0xc8,']*0C'))!=-0x1){var body=$response[_0x380c45(0xec,'2hAO')];body=$response[_0x380c45(0x144,'Kfsk')][_0x380c45(0xe8,'n!Nu')](/<ad[^>]*>/g,'')[_0x380c45(0xa9,'YNwk')](/(<userinfolabel)[^>]*>/g,_0x380c45(0xd9,'dhG1'));}else{if($request[_0x380c45(0xae,'Gg0#')][_0x380c45(0x131,'HdUg')](_0x380c45(0x94,'ECgC'))!=-0x1){var body=$response[_0x380c45(0xee,'d#66')];body=$response[_0x380c45(0xf4,'Eb^4')]['replace'](/<ad[^>]*>/g,'')[_0x380c45(0x10f,'HiXX')](/(<userinfolabel)[^>]*>/g,_0x380c45(0xe0,'ZOhk'));}else{if($request[_0x380c45(0x166,'BsVH')]['indexOf'](_0x380c45(0x138,'NCRk'))!=-0x1){var body=$response['body'],ddgksf2013={'content':[{'query_word':'搜索','desc':''}]};body=JSON[_0x380c45(0x128,'9m]v')](ddgksf2013);}else{if($request[_0x380c45(0xde,'zz(3')][_0x380c45(0x114,'oTEO')](_0x380c45(0x11d,'S*)6'))!=-0x1){var body=$response[_0x380c45(0x14f,'cpXu')],ddgksf2013=JSON['parse'](body);ddgksf2013[_0x380c45(0x160,'ZOhk')][_0x380c45(0xf6,'ZOhk')]=Object[_0x380c45(0x140,'S*)6')](ddgksf2013[_0x380c45(0xe1,'TzcB')][_0x380c45(0xa4,'vemE')])[_0x380c45(0xd0,'6QSy')](_0x236fc1=>{var _0x51674f=_0x380c45;if(_0x236fc1[_0x51674f(0xc4,'NCRk')]['includes']('卡'))return![];else return!![];}),body=JSON['stringify'](ddgksf2013);}else{if($request[_0x380c45(0x14d,'$*8J')][_0x380c45(0xda,'cpXu')](_0x380c45(0x101,'aFsb'))!=-0x1){var fFCnmw=_0x380c45(0x98,'S9iA')['split']('|'),bxmynN=0x0;while(!![]){switch(fFCnmw[bxmynN++]){case'0':if(ddgksf2013['data']&&ddgksf2013['data'][0x0]?.[_0x380c45(0x132,'$*8J')]==_0x380c45(0xea,'zz(3'))ddgksf2013[_0x380c45(0x126,'dhG1')][0x0][_0x380c45(0x96,'QAV0')]['noVip']=[_0x380c45(0x162,'QVjb')];continue;case'1':var body=$response[_0x380c45(0x15d,'pyhb')];continue;case'2':var ddgksf2013=JSON[_0x380c45(0x112,'ZOhk')](body);continue;case'3':ddgksf2013['data']=Object[_0x380c45(0xa0,'@L)0')](ddgksf2013['data'])['filter'](_0x3c3622=>{var _0x1de070=_0x380c45,_0x5d6a7a={'aKpqk':function(_0x37d99a,_0x21d8d7){return _0x37d99a!=_0x21d8d7;},'ByqKL':_0x1de070(0x145,'CURS'),'CWOtI':_0x1de070(0x153,'dGG4')};if(_0x5d6a7a['aKpqk'](_0x3c3622[_0x1de070(0xbf,'ZzwY')],_0x5d6a7a['ByqKL'])&&_0x3c3622[_0x1de070(0xc1,'n!Nu')]!=_0x5d6a7a['CWOtI'])return!![];else return![];});continue;case'4':body=JSON[_0x380c45(0x108,'Gg0#')](ddgksf2013);continue;}break;}}else{if($request['url'][_0x380c45(0x15f,']*0C')](_0x380c45(0xbb,'9m]v'))!=-0x1){var body=$response[_0x380c45(0xca,'BsVH')],ddgksf2013=JSON[_0x380c45(0x152,'sKCi')](body);ddgksf2013[_0x380c45(0x118,'$URg')]?.['tab']?.[_0x380c45(0x9c,'dGG4')]&&(ddgksf2013[_0x380c45(0x135,'cpXu')][_0x380c45(0xc7,'ho&!')][_0x380c45(0x137,'pyhb')]=[{'_id':_0x380c45(0xaa,'BsVH'),'title':'会员','type':_0x380c45(0x9f,'#Ji2'),'description':'会员','topics':[{'mainBgColor':'#3C2D08','title':'精选','navId':_0x380c45(0x10b,'ECgC'),'deputyBgColor':_0x380c45(0xf7,'d#66'),'url':_0x380c45(0x13e,'8UJU')}]}]),body=JSON[_0x380c45(0x121,'6QSy')](ddgksf2013);}else{if($request[_0x380c45(0x117,'ZzwY')][_0x380c45(0x12c,'poPG')](_0x380c45(0xf9,'ho&!'))!=-0x1){var body=$response[_0x380c45(0x11f,'zz(3')];body=body[_0x380c45(0xfc,'cpXu')](/"url"/g,'\x22URL\x22')['replace'](/last_time":\d+/g,_0x380c45(0xbd,'aFsb'));}else{if(/vip\/v2\/theme/[_0x380c45(0x134,'poPG')]($request[_0x380c45(0x107,'n!Nu')])){var body=$response[_0x380c45(0xb7,'@&g4')];let obj=JSON[_0x380c45(0xb3,'QAV0')](body);obj['data']['vipTheme'][_0x380c45(0x104,'cpXu')]=_0x380c45(0xcc,'poPG'),obj[_0x380c45(0xa7,'poPG')]['needBieds']=[],body=JSON[_0x380c45(0x13a,'vemE')](obj);}else{if(/vip\/v2\/userbase\/vip/[_0x380c45(0x150,'HiXX')]($request['url'])){var body=$response[_0x380c45(0x157,'sKCi')];let obj=JSON[_0x380c45(0x139,'j31p')](body);obj[_0x380c45(0x12b,'dGG4')]?.['vipui']&&(obj[_0x380c45(0xdb,'sKCi')][_0x380c45(0xb2,'QVjb')]={'vipIcon':_0x380c45(0xbe,'dhG1'),'iconJumpUrl':_0x380c45(0x120,'HiXX'),'growthValue':'21600','vipTag':'VIP6','vipOverSeasExpire':'0','time':'4000000000000','goSvipPage':'1','isNewUser':'1','vipmIcon':'https://image.kuwo.cn/fe/34ad47f8-da7f-43e4-abdc-e6c995666368yyb.png','svipIcon':'https://image.kuwo.cn/fe/f2d09ac0-b959-404f-86fa-dc65c715c0e96.png','vipmExpire':_0x380c45(0xb1,'vemE'),'biedSong':'0','luxuryIcon':_0x380c45(0x133,'HiXX'),'userType':'3','isYearUser':'2','vip3Expire':'0','experienceExpire':'0','luxAutoPayUser':'2','biedAlbum':'1','vipLuxuryExpire':_0x380c45(0x11b,'d#66'),'vipmAutoPayUser':'2','svipAutoPayUser':'2','vipExpire':'4000000000000','svipExpire':_0x380c45(0x154,'m5MA')}),obj[_0x380c45(0xad,'9m]v')]?.[_0x380c45(0x99,'aUbW')]&&(obj[_0x380c45(0xdd,'aFsb')][_0x380c45(0xe6,'E2Cb')]='{\x22timestamp\x22:1674205529,\x22packs\x22:{\x22type\x22:0,\x22end\x22:4000000000,\x22period\x22:1,\x22bought_vip\x22:1,\x22bought_vip_end\x22:4000000000},\x22result\x22:\x22ok\x22}'),body=JSON['stringify'](obj);}else{if(/vip\/v2\/user\/vip/[_0x380c45(0x124,'ECgC')]($request[_0x380c45(0x107,'n!Nu')])){var body=$response[_0x380c45(0x146,'Gg0#')];let obj=JSON[_0x380c45(0x10a,'Gg0#')]($response[_0x380c45(0x116,'aFsb')]);obj[_0x380c45(0xa7,'poPG')][_0x380c45(0xa3,'ZzwY')]='2',obj[_0x380c45(0x163,'CURS')][_0x380c45(0xfa,'YNwk')]='4000000000000',obj['data'][_0x380c45(0xe2,'Gg0#')]=_0x380c45(0x159,'@&g4'),obj[_0x380c45(0x126,'dhG1')][_0x380c45(0x97,'HiXX')]='2',obj['data'][_0x380c45(0xc2,'QVjb')]=_0x380c45(0x154,'m5MA'),obj['data'][_0x380c45(0xb4,'6QSy')]='4000000000000',obj['data'][_0x380c45(0xd2,'FbHD')]=_0x380c45(0xe4,'NCRk'),obj['data'][_0x380c45(0x161,'CURS')]=_0x380c45(0xcd,'HiXX'),body=JSON['stringify'](obj);}else{if(/v2\/api\/pay\/vip\/extraVipStatus/[_0x380c45(0x142,'NCRk')]($request[_0x380c45(0xba,'rnal')])){var body=$response[_0x380c45(0xd8,'ECgC')];let obj=JSON[_0x380c45(0xc6,'Eb^4')](body);obj[_0x380c45(0xc9,']*0C')][_0x380c45(0x10d,'TzcB')]=0x1,body=JSON['stringify'](obj);}else{if(/music\.pay\?uid=.*/[_0x380c45(0xd7,'@&g4')]($request[_0x380c45(0xef,']*0C')])){var url=$request[_0x380c45(0xa6,'ho&!')][_0x380c45(0x15b,'@&g4')](/uid=\d+/g,'uid=6');$done({'url':url});}else{if(/vip\/enc\/user/['test']($request[_0x380c45(0x14a,'E2Cb')])){var body=$response[_0x380c45(0x144,'Kfsk')];body=_0x380c45(0x149,'E2Cb');}else;}}}}}}}}}}}}}}}$request['url'][_0x380c45(0xab,'m5MA')](_0x380c45(0xb6,'Gg0#'))==-0x1&&$[_0x380c45(0x95,'n!Nu')]({'body':body});var version_ = 'jsjiami.com.v7';
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e)} isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = [""]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
